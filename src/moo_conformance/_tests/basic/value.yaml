name: value
description: Basic value type operations
# Converted from toaststunt test/tests/basic/value/test.in

tests:
  - name: typeof_int
    code: "typeof(3) == INT"
    expect:
      value: 1

  - name: typeof_string
    code: "typeof(\"abc\") == STR"
    expect:
      value: 1

  - name: typeof_float
    code: "typeof(1.0) == FLOAT"
    expect:
      value: 1

  - name: typeof_list
    code: "typeof({\"foo\"}) == LIST"
    expect:
      value: 1

  - name: typeof_object
    code: "typeof(#0) == OBJ"
    expect:
      value: 1

  - name: tostr_int
    code: "tostr(17)"
    expect:
      value: "17"

  - name: tostr_float
    code: "tostr(3.0)"
    expect:
      value: "3.0"

  - name: tostr_object
    code: "tostr(#0)"
    expect:
      value: "#0"

  - name: tostr_list
    code: "tostr({1, 2})"
    expect:
      value: "{list}"

  - name: toliteral_int
    code: "toliteral(17)"
    expect:
      value: "17"

  - name: toliteral_float
    code: "toliteral(3.0)"
    expect:
      value: "3.0"

  - name: toliteral_object
    code: "toliteral(#0)"
    expect:
      value: "#0"

  - name: toliteral_list
    code: "toliteral({1, 2})"
    expect:
      value: "{1, 2}"

  - name: toint_from_int
    code: "toint(10)"
    expect:
      value: 10

  - name: toint_from_float
    code: "toint(3.0)"
    expect:
      value: 3

  - name: toint_from_object
    code: "toint(#2)"
    expect:
      value: 2

  - name: toint_from_string
    code: "toint(\"-34\")"
    expect:
      value: -34

  - name: toobj_from_string
    code: "toobj(\"2\")"
    expect:
      value: "#2"

  - name: toobj_from_int
    code: "toobj(2)"
    expect:
      value: "#2"

  - name: toobj_invalid_string
    code: "toobj(\"foo\")"
    expect:
      value: "#0"

  - name: tofloat_from_int
    code: "tofloat(34)"
    expect:
      value: 34.0

  - name: tofloat_from_string
    code: "tofloat(\"34.7\")"
    expect:
      value: 34.7

  - name: tofloat_from_float
    code: "tofloat(7.3)"
    expect:
      value: 7.3

  - name: equal_simple_true
    code: "equal(1 + 1, 2)"
    expect:
      value: 1

  - name: equal_string_case_sensitive
    code: "equal(\"Foo\", \"foo\")"
    expect:
      value: 0

  - name: equal_string_match
    code: "equal(\"foo\", \"foo\")"
    expect:
      value: 1

  - name: equal_list_match
    code: "equal({1, 2}, {1, 2})"
    expect:
      value: 1

  - name: equal_list_different
    code: "equal({1, 2}, {1, 3})"
    expect:
      value: 0

  # ===========================================================================
  # tostr edge cases
  # ===========================================================================

  - name: tostr_string
    description: "String passed to tostr returns itself"
    code: 'tostr("hello")'
    expect:
      value: "hello"

  - name: tostr_error
    description: "Error values get their description string"
    code: 'tostr(E_TYPE)'
    expect:
      value: "Type mismatch"

  - name: tostr_no_args
    description: "Zero args produces empty string"
    code: 'tostr()'
    expect:
      value: ""

  - name: tostr_multiple_args
    description: "Multiple args are concatenated"
    code: 'tostr("hello", " ", "world")'
    expect:
      value: "hello world"

  - name: tostr_mixed_types
    description: "Mixed types all convert to string and concatenate"
    code: 'tostr("val=", 42, " obj=", #0)'
    expect:
      value: "val=42 obj=#0"

  # ===========================================================================
  # toliteral edge cases
  # ===========================================================================

  - name: toliteral_string
    description: "Literal form of string includes quotes"
    code: 'toliteral("hello")'
    expect:
      value: "\"hello\""

  - name: toliteral_error
    description: "Literal form of error is its name"
    code: 'toliteral(E_TYPE)'
    expect:
      value: "E_TYPE"

  - name: toliteral_nested_list
    description: "Nested structures rendered recursively"
    code: 'toliteral({1, {2, 3}})'
    expect:
      value: "{1, {2, 3}}"

  - name: toliteral_map_basic
    description: "Map literal form uses arrow syntax"
    code: 'toliteral(["a" -> 1])'
    expect:
      value: "[\"a\" -> 1]"
